"use strict";(self["webpackChunkvue_antd_pro"]=self["webpackChunkvue_antd_pro"]||[]).push([[222],{24222:function(a,t,e){e.r(t),e.d(t,{default:function(){return m}});e(68309),e(82526),e(41817),e(47042);var i=function(){var a=this,t=a._self._c;return t("div",{staticClass:"page-header-index-wide page-header-wrapper-grid-content-main"},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:24,lg:17}},[t("a-card",{staticStyle:{width:"100%","min-height":"600px"},attrs:{title:a.midiInfo.name,bordered:!1}},[t("div",[t("a-descriptions",{attrs:{column:3}},[t("a-descriptions-item",{attrs:{label:"曲名"}},[a._v(a._s(a.midiInfo.name))]),t("a-descriptions-item",{attrs:{label:"作曲"}},[a._v(a._s(a.midiInfo.compose))]),t("a-descriptions-item",{attrs:{label:"调性"}},[a._v(a._s(a.midiInfo.tone))]),t("a-descriptions-item",{attrs:{label:"流派"}},[a._v(a._s(a.midiInfo.genre))]),t("a-descriptions-item",{attrs:{label:"上传"}},[a._v(a._s(a.midiInfo.publisher))]),t("a-descriptions-item",{attrs:{label:"日期"}},[a._v(a._s(a.midiInfo.pubdate))])],1),t("a-descriptions",{attrs:{column:1}},[t("a-descriptions-item",[a._v(a._s(a.midiInfo.description))]),t("a-descriptions-item",a._l(a.midiInfo.tags,(function(e,i){return t("a-tag",{key:i,attrs:{color:e.color}},[a._v(a._s(e.name))])})),1)],1)],1),t("a-divider",{attrs:{dashed:""}}),t("audio",{ref:"audio",staticStyle:{display:"none"},on:{timeupdate:a.timeupdate,loadedmetadata:a.loadedmetadata}},[t("source",{attrs:{src:a.midiInfo.mp3,type:"audio/mpeg"}}),a._v(" 您的浏览器不支持 audio 元素。 ")]),t("div",{staticStyle:{display:"inline-block","vertical-align":"top"}},[t("a-space",{attrs:{align:"baseline",size:"middle"}},[a.audio.paused?t("span",[t("a-button",{attrs:{shape:"circle",icon:"caret-right"},on:{click:a.playAudio}}),a._v(" "+a._s(a.midiInfo.count.play))],1):t("span",[t("a-button",{attrs:{type:"link",shape:"circle"},on:{click:a.playAudio}},[t("a-progress",{attrs:{type:"circle",percent:a.audio.percent,width:36,format:function(){return"".concat(a.audio.text)}}})],1),a._v(" "+a._s(a.midiInfo.count.play)+" ")],1),t("span",[t("a-button",{attrs:{type:"dashed",shape:"circle",icon:"like"}}),a._v(" "+a._s(a.midiInfo.count.like))],1),t("span",[t("a-button",{attrs:{type:"dashed",shape:"circle",icon:"star"}}),a._v(" "+a._s(a.midiInfo.count.star))],1),t("span",[t("a-button",{attrs:{type:"dashed",shape:"circle",icon:"share-alt"}}),a._v(" "+a._s(a.midiInfo.count.share))],1),t("span",[t("a-button",{attrs:{type:"dashed",shape:"circle",icon:"download"}}),a._v(" "+a._s(a.midiInfo.count.download))],1)])],1),t("a-divider",{attrs:{dashed:""}}),a._l(a.midiInfo.scoreImgs.slice(0,3),(function(a,e){return t("div",{key:e},[t("img",{staticStyle:{"max-width":"100%"},attrs:{src:a}})])}))],2)],1),t("a-col",{attrs:{md:24,lg:7}},[t("a-card",{attrs:{bordered:!1,size:"small",bodyStyle:{"margin-bottom":"12px"},headStyle:{padding:"4px 12px"}}},[t("a-space",{attrs:{slot:"title",align:"center",size:"middle"},slot:"title"},[t("a-avatar",{attrs:{src:a.avatar}}),t("span",[a._v(a._s(a.publisherInfo.name))]),t("a-button",{attrs:{type:"primary",size:"small"}},[a._v("关注")])],1),a.publisherInfo.fans.length<=a.fansMax?t("a-space",{staticStyle:{margin:"10px auto"},attrs:{align:"center",size:"middle"}},a._l(a.publisherInfo.fans,(function(a,e){return t("a-avatar",{key:e,attrs:{src:a.avatar}})})),1):t("a-space",{staticStyle:{margin:"10px auto"},attrs:{align:"center",size:"middle"}},[a._l(a.publisherInfo.fans.slice(0,a.fansMax-1),(function(a,e){return t("a-avatar",{key:e,attrs:{src:a.avatar}})})),t("a-avatar",[a._v(a._s(a.publisherInfo.fanTotal-a.fansMax+1)+"+")])],2)],1),t("a-card",{attrs:{bordered:!1,size:"small",bodyStyle:{"margin-bottom":"12px"},title:"最近上传"}},[t("a-list",{attrs:{"data-source":a.publisherInfo.lastUploads,size:"large"},scopedSlots:a._u([{key:"renderItem",fn:function(e){return t("a-list-item",{},[t("a-list-item-meta",{attrs:{description:e.time}},[t("a",{attrs:{slot:"title",href:e.href},slot:"title"},[a._v(a._s(e.name))]),t("a-avatar",{attrs:{slot:"avatar",shape:"square",size:64,src:a.avatar},slot:"avatar"})],1)],1)}}])})],1),t("a-card",{attrs:{bordered:!1,size:"small",bodyStyle:{"margin-bottom":"12px"},title:"相关曲谱"}},[t("a-list",{attrs:{"data-source":a.relateMidis,size:"large"},scopedSlots:a._u([{key:"renderItem",fn:function(e){return t("a-list-item",{},[t("a-list-item-meta",{attrs:{description:e.author}},[t("a",{attrs:{slot:"title",href:e.href},slot:"title"},[a._v(a._s(e.name))]),t("a-avatar",{attrs:{slot:"avatar",shape:"square",size:64,src:a.avatar},slot:"avatar"})],1)],1)}}])})],1)],1)],1)],1)},s=[],r=e(23711),n=e(61036),o=e(20629),d={components:{RouteView:n.Ws,PageView:n.B4},data:function(){return{midiInfo:{id:0,avatar:"",name:"",compose:"",genre:"",publisher:"",pubdate:"",tone:"",count:{play:0,comment:0,view:0,like:0,dislike:0,star:0,share:0,download:0},description:"",cover:"",mp3:"",scoreImgs:[],tags:[]},audio:{duration:0,currentTime:0,percent:0,paused:!0,text:"00:00"},publisherInfo:{name:"李四",fanTotal:340,scoreTotal:40,fans:[{name:"张三",avatar:"/avatar2.jpg"},{name:"李四",avatar:"/logo.png"},{name:"王五",avatar:"/avatar2.jpg"},{name:"李一",avatar:"/logo.png"},{name:"杜二",avatar:"/avatar2.jpg"},{name:"五七",avatar:"/logo.png"},{name:"杜一",avatar:"/avatar2.jpg"}],lastUploads:[{name:"所念皆星河 C调版",desc:"",href:"www.baidu.com",time:"1小时前",author:"李四"},{name:"所念皆星河 E调版",desc:"",href:"www.baidu.com",time:"昨天",author:"李四"},{name:"所念皆星河 E#调版",desc:"",href:"www.baidu.com",time:"上个月",author:"李四"},{name:"所念皆星河 F调版",desc:"",href:"www.baidu.com",time:"去年",author:"李四"}]},fansMax:6,relateMidis:[{name:"所念皆星河 C调版",desc:"",href:"www.baidu.com",time:"1小时前",author:"李四"},{name:"所念皆星河 简单版",desc:"",href:"www.baidu.com",time:"昨天",author:"张三"},{name:"所念皆星河 完全版",desc:"",href:"www.baidu.com",time:"上个月",author:"王五"},{name:"所念皆星河 F调版",desc:"",href:"www.baidu.com",time:"去年",author:"李四"}]}},computed:(0,r.Z)({},(0,o.Se)(["nickname","avatar"])),mounted:function(){this.getMidiDetail()},methods:{getMidiDetail:function(){var a=this,t=this.$route.params.id;this.$http.post("/list/midi-detail",{id:t}).then((function(t){a.midiInfo=t.result}))},playAudio:function(){var a=this.$refs.audio;a.paused?a.play():a.pause(),this.audio.paused=a.paused},timeupdate:function(){this.audio.currentTime=this.$refs.audio.currentTime,this.audio.percent=parseInt(this.audio.currentTime/this.audio.duration*100)},loadedmetadata:function(){this.audio.duration=this.$refs.audio.duration,this.audio.duration>0&&(this.audio.text=this.transTime(this.audio.duration))},transTime:function(a){var t=parseInt(a),e=parseInt(t/60),i=t%60+"",s=":";return 0===e?e="00":e<10&&(e="0"+e),1===i.length&&(i="0"+i),e+s+i}}},l=d,c=e(1001),u=(0,c.Z)(l,i,s,!1,null,"21463c01",null),m=u.exports}}]);